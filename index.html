<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-blue-grey.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
        html, body, h1, h2, h3, h4, h5 {font-family: "Open Sans", sans-serif}
        .vertical {
            display: inline-block;
            vertical-align: middle;
            line-height: normal;
        }
        .caja {
            height: 60px;
            line-height: 50px;
        }
        .caja2 {
            height: 60px;
            line-height: 60px;
        }
        @media (max-width:600px){
          h1{font-size:26px}
        }
    </style>
    <title>Greetings</title>
</head>
<body class="w3-theme-l5">

<div class="w3-top">
    <div class="w3-bar w3-white w3-left-align w3-large w3-card">
        <a href="#" class="w3-bar-item"><img src="img/logo.png" class="w3-image" style="height: 35px;"></a>
        <span class="w3-bar-item w3-padding-large w3-hide-large">LESSON 1.1 &nbsp; GREETINGS</span>
        <span class="w3-bar-item w3-padding-large w3-hide-small w3-hide-medium">LESSON 1.1 &nbsp; GREETINGS AND FAREWELLS: SALUDOS Y DESPEDIDAS</span>
    </div>
</div>

<div class="w3-container w3-content" style="max-width: 1400px; margin-top: 80px;">

<div id="intro" class="w3-card w3-round w3-white">
    <div class="w3-container w3-large">
        <p>Pocas cosas pueden denotar educación y decoro como el saludo y la despedida. Es una actividad cotidiana que es asunto obligatorio al socializar con semejantes y amigos y es por esto que es nuestro primer tema.</p>
    </div>
</div>

<br><br>

<!--Vocabulary 1-->
<div id="vocabulary" class="w3-card w3-round w3-white">
    <div class="w3-container">
        <h1>Vocabulary</h1>
        <div class="caja">
          <span class="w3-large vertical"><a href="#" onclick="listen(greetings)"><i class="fa fa-play-circle w3-xxlarge"></i></a></span><span class="w3-large vertical">&nbsp;&nbsp;Listen. Then listen and repeat<br><span class="w3-text-grey w3-medium">&nbsp; Escucha. Luego escucha y repite</span></span>
        </div>
        <hr>
        <div class="w3-row w3-center">
            <div class="w3-col s4 m4 l4">
                <img src="img/1_1_1.jpg" alt="good morning" class="w3-image">
            </div>
            <div class="w3-col s4 m4 l4">
                <img src="img/1_1_2.jpg" alt="good afternoon" class="w3-image">
            </div>
            <div class="w3-col s4 m4 l4">
                <img src="img/1_1_3.jpg" alt="good evening" class="w3-image">
            </div>
        </div>
    </div>
</div>

<br><br>

<!--Vocabulary 2-->
<div id="vocabulary" class="w3-card w3-round w3-white">
  <div class="w3-container">
      <h1>Vocabulary</h1>
      <div class="caja">
        <span class="w3-large vertical"><a href="#" onclick="listen(farewells)"><i class="fa fa-play-circle w3-xxlarge"></i></a></span><span class="w3-large vertical">&nbsp;&nbsp;Listen. Then listen and repeat<br><span class="w3-text-grey w3-medium">&nbsp; Escucha. Luego escucha y repite</span></span>
      </div>
      <hr>
      <div class="w3-row w3-center">
          <div class="w3-col s4 m4 l4">
              <img src="img/1_1_4.png" alt="see you later" class="w3-image">
          </div>
          <div class="w3-col s4 m4 l4">
              <img src="img/1_1_5.png" alt="see you soon/tomorrow" class="w3-image">
          </div>
          <div class="w3-col s4 m4 l4">
              <img src="img/1_1_6.png" alt="good night" class="w3-image">
          </div>
      </div>
  </div>
</div>

<br><br>

<!--Other Vocabulary-->
<div class="w3-card w3-round w3-white">
    <div class="w3-container">
        <h1>Other Vocabulary</h1>
        <div class="caja">
          <span class="w3-large vertical"><a href="#" onclick="myFunction(0,res)"><i class="fa fa-play-circle w3-xxlarge"></i></a></span><span class="w3-large vertical">&nbsp;&nbsp;Listen and repeat<br><span class="w3-text-grey w3-medium">&nbsp; Escucha y repite</span></span>
        </div>
        <hr>
        <p class="w3-large">Greetings and some possible answers:<br>
          <span class="w3-text-orange">Greeting: </span><b>Hi!</b><br>
          <span class="w3-text-purple">Possible answers: </span><b>Hi! / Hello!</b><br>
          <span class="w3-text-orange">Greeting: </span> <b>How are you?</b><br>
          <span class="w3-text-purple">Possible answers: </span><b>Good. And you? / I’m fine thank you / I’m well, and you? / I’m great / I’m tired / I’m sick / I’m sad / I’m angry / I’m thirsty.</b><br>
          <span class="w3-text-orange">Greeting: </span> <b>How is everything?</b><br>
          <span class="w3-text-purple">Possible answers: </span><b>Everything is ok / Everything is good / Everything is wrong.</b><br>
          <span class="w3-text-orange">Greeting: </span> <b>What’s up?</b><br>
          <span class="w3-text-purple">Possible answers: </span><b>Hi! / Good! / Not bad!</b><br>
          <span class="w3-text-orange">Greeting: </span><b>How’s your family going?</b><br>
          <span class="w3-text-purple">Possible answers: </span><b>My family is good / My family is wrong.</b><br>
        </p>
    </div>
</div>

<br><br>

<!--Speaking Exercises-->
<div class="w3-card w3-round w3-white">
  <div class="w3-container">
      <h1>Speaking Exercises</h1>
      <p><span class="w3-large">Pronounce all the expressions</span><br><span class="w3-text-grey">Pronuncia todas las expresiones</span></p>
      <hr>
      <div class="w3-center">
        <div class="caja">
          <span class="vertical"><a href="#" onclick="" class="w3-text-blue"><i class="fa fa-play-circle w3-xlarge"></i></a></span><span class="w3-xlarge vertical">&nbsp;&nbsp;How are you?</span>
        </div>
        <span class="w3-text-grey w3-medium">¿Como estas tu?</span>
        <hr>
        <p id="output" class="w3-large w3-text-blue">hello</p>
        <p>
          <button class="w3-button w3-circle w3-blue"><i class="fa fa-microphone w3-xxlarge"></i></button>
        </p>
        <p>
          <div class="caja2">
            <span class="vertical">
              <button class="w3-circle w3-blue" style="border: none;"><i class="fa fa-arrow-left w3-medium"></i></button>
              <span class="w3-text-blue">&nbsp; 1 / 13 &nbsp;</span>
              <button class="w3-circle w3-blue" style="border: none;"><i class="fa fa-arrow-right w3-medium"></i></button>
            </span>
          </div>
        </p>
      </div>
      <br>
    </div>
</div>

<br><br>

<!--Meanings-->
<div class="w3-card w3-round w3-white">
    <div class="w3-container">
        <h1>Meanings</h1>
        <p><span class="w3-large">Meaning of the words</span><span class="w3-text-grey">&nbsp; Significado de las palabras</span></p>
        <hr>
        <p class="w3-large">
          <b>Hi:</b><span class="w3-text-green">  Hola</span><br>
          <b>Hello:</b><span class="w3-text-green">  Hola</span><br>
          <b>How are you?:</b><span class="w3-text-green"> ¿Como estas?</span><br>
          <b>Good. And you?:</b><span class="w3-text-green">  ¿Bien y tu?</span><br>
          <b>I’m fine, thanks:</b><span class="w3-text-green"> Estoy bien, gracias.</span><br>
          <b>I’m well and you?:</b><span class="w3-text-green"> Estoy bien. ¿Y tu?</span><br>
          <b>I’m great:</b><span class="w3-text-green"> Estoy genial.</span><br>
          <b>I’m tired:</b><span class="w3-text-green"> Estoy cansado, estoy cansada.</span><br>
          <b>I’m sick:</b><span class="w3-text-green"> Estoy enfermo, estoy enferma.</span><br>
          <b>I’m sad:</b><span class="w3-text-green"> Estoy triste.</span><br>
          <b>I’m angry:</b><span class="w3-text-green"> Estoy enojado, estoy enojada</span><br>
          <b>I’m thirsty:</b><span class="w3-text-green"> Estoy sediento, estoy sedienta.</span><br>
          <b>How is everything?:</b><span class="w3-text-green"> Como ¿esta todo?</span><br>
          <b>Everything is ok:</b><span class="w3-text-green"> Todo bien.</span><br>
          <b>Everything is good:</b><span class="w3-text-green">  Todo bien.</span><br>
          <b>Everything is wrong:</b><span class="w3-text-green"> Todo mal.</span><br>
          <b>What’s up?:</b><span class="w3-text-green"> ¿Que tal?, ¿Que hubo?</span><br>
          <b>Not bad:</b><span class="w3-text-green"> No mal.</span><br>
          <b>How’s your family going?:</b><span class="w3-text-green"> ¿Como esta tu familia?</span><br>
          <b>My family is good:</b><span class="w3-text-green"> Mi familia esta bien.</span><br>
          <b>My family is wrong:</b><span class="w3-text-green"> Mi familia esta mal.</span><br>
        </p>
    </div>
</div>

<br><br>

<!--Grammar Exercises-->
<div class="w3-card w3-round w3-white">
  <div class="w3-container">
      <h1>Grammar Exercises</h1>
      <p><span class="w3-large">Fill in the blanks with the words given above</span><span class="w3-text-grey">&nbsp; Selecciona la palabra correcta</span></p>
      <hr>
      <form id="dataForm_grammar">
        <p>a. <select name="uno"><option value="value1"></option><option value="good">Good</option><option value="value3">Bad</option><option value="value4">Are</option></select> morning!</p>
        <p>b. How <select name="dos"><option value="value1"></option><option value="value2">Good</option><option value="value3">Bad</option><option value="are">Are</option></select> you?</p>
        <p>c. How is everything? <select name="tres"><option value="value1"></option><option value="value2">How</option><option value="everything">Everything</option><option value="value4">I am</option></select> is good.</p>
        <p>d. <select name="cuatro"><option value="v1"></option><option value="v2">Are</option><option value="what">What's</option><option value="v4">you</option></select> up?</p>
        <p>e. My <select name="cinco"><option value="value1"></option><option value="family">family</option><option value="value3">are</option><option value="value4">good</option></select> is wrong</p>
        <p>f. <select name="seis"><option value="value1"></option><option value="value2">Family</option><option value="value3">Bad</option><option value="Iam">I'am</option></select> thirsty.</p>
      </form>
      <hr>
      <div class="w3-center w3-text-purple" id="graanswer"></div>
      <p class="w3-center"><input class="w3-button w3-theme-d4 w3-round-xlarge" value="Comprobar" type="submit" id="dataForm_grammar_Button"></p>
    </div>
</div>

<br><br>

<!--Writing Exercises-->
<div class="w3-card w3-round w3-white">
  <div class="w3-container">
      <h1>Writing Exercises</h1>
      <p><span class="w3-large">Write in correct order all the expressions</span><span class="w3-text-grey">&nbsp; Escribe en el orden correcto las siguientes expresiones</span></p>
      <hr>
      <p>a)	You are how? &nbsp; <input class="w3-input w3-round w3-border" type="text" id="wri1">
      <span class="w3-text-red" id="errwri1"></span></p>
      <p>b)	You, and good? &nbsp; <input class="w3-input w3-round w3-border" type="text" id="wri2">
      <span class="w3-text-red" id="errwri2"></span></p>
      <p>c)	Fine, I’m thanks &nbsp; <input class="w3-input w3-round w3-border" type="text" id="wri3">
      <span class="w3-text-red" id="errwri3"></span></p>
      <p>d)	Is how everything? &nbsp; <input class="w3-input w3-round w3-border" type="text" id="wri4">
      <span class="w3-text-red" id="errwri4"></span></p>
      <p>h)	Good is my family. &nbsp; <input class="w3-input w3-round w3-border" type="text" id="wri5">
      <span class="w3-text-red" id="errwri5"></span></p>
      <hr>
      <div class="w3-center w3-text-purple" id="wrianswer"></div>
      <p class="w3-center"><button class="w3-button w3-theme-d4 w3-round-xlarge" onclick="writting_exercise()">Comprobar</button></p>
    </div>
</div>

<br><br>

<!--Translate Exercises-->
<div class="w3-card w3-round w3-white">
  <div class="w3-container">
      <h1>Translate Exercises</h1>
      <p><span class="w3-large">Translate all the expressions</span><span class="w3-text-grey">&nbsp; Traduce las siguientes expresiones</span></p>
      <hr>
      <p>a)	Mi familia está bien &nbsp; <input class="w3-input w3-round w3-border" type="text" id="trans1">
        <span class="w3-text-red" id="errtrans1"></span></p>
      <p>b)	Estoy bien. ¿Y tú? &nbsp; <input class="w3-input w3-round w3-border" type="text" id="trans2">
        <span class="w3-text-red" id="errtrans2"></span></p>
      <p>c)	Tengo sed &nbsp; <input class="w3-input w3-round w3-border" type="text" id="trans3">
        <span class="w3-text-red" id="errtrans3"></span></p>
      <p>d)	Estoy triste &nbsp; <input class="w3-input w3-round w3-border" type="text" id="trans4">
        <span class="w3-text-red" id="errtrans4"></span></p>
      <p>e)	¿Como esta todo? &nbsp; <input class="w3-input w3-round w3-border" type="text" id="trans5">
        <span class="w3-text-red" id="errtrans5"></span></p>
      <hr>
      <div class="w3-center w3-text-purple" id="transanswer"></div>
      <p class="w3-center"><button class="w3-button w3-theme-d4 w3-round-xlarge" onclick="translate_exercise()">Comprobar</button></p>
    </div>
</div>

<br><br>

<!--7.	READING EXERCISE-->
<div class="w3-card w3-round w3-white">
  <div class="w3-container">
      <h1>Reading Exercises</h1>
      <p><span class="w3-large">Make the reading and select the correct option</span><span class="w3-text-grey">&nbsp; Leer y seleccionar la opción correcta</span></p>
      <hr>
      <div class="">
          <p><a href="#" class="w3-xlarge" onclick="myFunction2()"><i class="fa fa-play-circle w3-xxlarge"></i></a></p>
          <p id="pa" class="w3-serif w3-large"><i>Greeting is an important part of our socialization with other people. Before 12:00 PM we say “good morning”. Among 12:00 PM and 6:00 PM we say “good afternoon” and at night, when we greet, we say “good evening”, but in farewell, we say “good night”. It is important to highlight that while it is night and before going to bed, in a greet we say good evening although it is 2 o’clock AM. Just when we have slept and gotten up we can say “good morning” even it is night after 12 AM.</i></p>
      </div>
      <br>
      <form id="dataForm_Reading">
      <div>
          <p>1) We meet at a breakfast with a friend, we must say:</p>
          <input class="w3-radio" type="radio" name="r1" value="0" ><label> Good morning</label><br>
          <input class="w3-radio" type="radio" name="r1" value="1" ><label> Good afternoon</label><br>
          <input class="w3-radio" type="radio" name="r1" value="2" ><label> Good evening</label><br>
          <input class="w3-radio" type="radio" name="r1" value="3" checked><label> Good night</label><br>
      </div>
      <br>
      <div>
          <p>2) The graduation of my soon is at 3:00 o’clock. I see my friend at the place of the graduation and I greet him, saying:</p>
          <input class="w3-radio" type="radio" name="r2" value="0" ><label> Good morning</label><br>
          <input class="w3-radio" type="radio" name="r2" value="1" ><label> Good afternoon</label><br>
          <input class="w3-radio" type="radio" name="r2" value="2" ><label> Good evening</label><br>
          <input class="w3-radio" type="radio" name="r2" value="3" checked><label> Good night</label><br>
      </div>
      <br>
      <div>
          <p>3) My girlfriend was at a party with me. I take her to her house and she says goodbye to me when saying:</p>
          <input class="w3-radio" type="radio" name="r3" value="0" ><label> Good morning</label><br>
          <input class="w3-radio" type="radio" name="r3" value="1" ><label> Good afternoon</label><br>
          <input class="w3-radio" type="radio" name="r3" value="2" ><label> Good evening</label><br>
          <input class="w3-radio" type="radio" name="r3" value="3" checked><label> Good night</label><br>
      </div>
      <br>
      <div>
          <p>4) I am drinking too much water when a friend of mine sees me. He asks me “how are  you?” and I response:</p>
          <input class="w3-radio" type="radio" name="r4" value="0" ><label> I’m sleepy</label><br>
          <input class="w3-radio" type="radio" name="r4" value="1" ><label> I’m thirsty</label><br>
          <input class="w3-radio" type="radio" name="r4" value="2" ><label> I’m sad</label><br>
          <input class="w3-radio" type="radio" name="r4" value="3" checked><label> I’m angry</label><br>
      </div>
      </form>
      <hr>
      <div class="w3-center w3-text-purple" id="redanswer"></div>
      <p class="w3-center"><input class="w3-button w3-theme-d4 w3-round-xlarge" value="Comprobar" type="submit" id="dataForm_Reading_Button"></p>
  </div>
</div>

<br><br>

<!--Listen Exercises-->
<div class="w3-card w3-round w3-white">
  <div class="w3-container">
      <h1>Write all what you hear</h1>
      <p><span class="w3-large">Listen and write all the expressions</span><span class="w3-text-grey">&nbsp; Escucha y escribe las siguientes expresiones</span></p>
      <hr>
      <div class="w3-row">
        <div class="w3-col" style="width:50px"><p><a href="#" class="w3-xlarge" onclick="myFunction(0,lis)"><i class="fa fa-play-circle w3-xxlarge"></i></a></p></div>
        <div class="w3-rest"><p><input class="w3-input w3-round w3-border" type="text" id="lis1"></p><span class="w3-text-red" id="errlis1"></span></div>
      </div>
      <div class="w3-row">
        <div class="w3-col" style="width:50px"><p><a href="#" class="w3-xlarge" onclick="myFunction(1,lis)"><i class="fa fa-play-circle w3-xxlarge"></i></a></p></div>
        <div class="w3-rest"><p><input class="w3-input w3-round w3-border" type="text" id="lis2"></p><span class="w3-text-red" id="errlis2"></span></div>
      </div>
      <div class="w3-row">
        <div class="w3-col" style="width:50px"><p><a href="#" class="w3-xlarge" onclick="myFunction(2,lis)"><i class="fa fa-play-circle w3-xxlarge"></i></a></p></div>
        <div class="w3-rest"><p><input class="w3-input w3-round w3-border" type="text" id="lis3"></p><span class="w3-text-red" id="errlis3"></span></div>
      </div>
      <div class="w3-row">
        <div class="w3-col" style="width:50px"><p><a href="#" class="w3-xlarge" onclick="myFunction(3,lis)"><i class="fa fa-play-circle w3-xxlarge"></i></a></p></div>
        <div class="w3-rest"><p><input class="w3-input w3-round w3-border" type="text" id="lis4"></p><span class="w3-text-red" id="errlis4"></span></div>
      </div>
      <div class="w3-row">
        <div class="w3-col" style="width:50px"><p><a href="#" class="w3-xlarge" onclick="myFunction(4,lis)"><i class="fa fa-play-circle w3-xxlarge"></i></a></p></div>
        <div class="w3-rest"><p><input class="w3-input w3-round w3-border" type="text" id="lis5"></p><span class="w3-text-red" id="errlis5"></span></div>
      </div>
      <hr>
      <div class="w3-center w3-text-purple" id="lisanswer"></div>
      <p class="w3-center"><button class="w3-button w3-theme-d4 w3-round-xlarge" onclick="listen_exercise(lis)">Comprobar</button></p>
  </div>
</div>

<br><br>

<!--Speaking Exercises
<div class="w3-card w3-round w3-white">
  <div class="w3-container">
      <h1>Speaking Exercises</h1>
      <p><span class="w3-large">Pronounce all the expressions you see below</span><span class="w3-text-grey">&nbsp; Pronuncia las siguientes expresiones</span></p>
      <hr>
      <p><a href="#" onclick="runSpeechRecognition()"><i class="fa fa-microphone"></i></a>&nbsp;&nbsp;How are you?</p>
      <p><a href="#" onclick="runSpeechRecognition()"><i class="fa fa-microphone"></i></a>&nbsp;&nbsp;I’m fine thank you.</p>
      <p><a href="#" onclick="runSpeechRecognition()"><i class="fa fa-microphone"></i></a>&nbsp;&nbsp;I’m well and you?</p>
      <p id="output" class="w3-text-blue"></p>
      <br>
    </div>
</div>-->


<br><br><br>

</div>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script>

const synth = window.speechSynthesis;

//const voiceSelect = document.querySelector("#select");
//const pitch = document.querySelector("#pitch");
//const pitchValue = document.querySelector(".pitch-value");
//const rate = document.querySelector("#rate");
//const rateValue = document.querySelector(".rate-value");

const greetings = ["Good morning. Good afternoon. Good evening. Now listen, and repeat","Good morning","Good afternoon","Good evening"];
const farewells = ["see you later. see you soon. Good night. Now listen, and repeat","See you later","See you soon","Good night"];
const par = "Greeting is an important part of our socialization with other people. Before 12:00 PM we say “good morning”. Among 12:00 PM and 6:00PM we say “good afternoon” and at night, when we greet, we say “good evening”, but in farewell, we say “good night”. It is important to highlight that while it is night and before going to bed, in a greet we say good evening although it is 2 o’clock AM. Just when we have slept and gotten up we can say “good morning” even it is night after 12 AM.";

const lis = ["How are you?","I’m fine, thank you","I’m well, and you?","I’m angry","How is everything?"];

const words = ["Hi","Hello","How are you?","Good. And you?","I’m fine, thanks","I’m well. And you","I’m great","I’m tired","I’m sick","I’m sad","I’m angry","I’m thirsty","How is everything?","Everything is ok","Everything is good","Everything is wrong","What’s up?","Not bad","How’s your family going?","My family is good","My family is wrong"];

let voices = [];

function speak(txt) {
    const utterThis = new SpeechSynthesisUtterance(txt);

    utterThis.onend = function (event) {
      console.log("SpeechSynthesisUtterance.onend");
    };
    utterThis.onerror = function (event) {
      console.error("SpeechSynthesisUtterance.onerror");
    };

    //const selectedOption = voiceSelect.selectedOptions[0].getAttribute("data-name");
    
    //console.log(voices);
    /*for (let i = 0; i < voices.length; i++) {
      if (voices[i].name === "Microsoft Zira - English (United States)") {
        console.log(voices[i].name);
      }
    }*/

    utterThis.voice = voices[0];
    utterThis.pitch = 0.6;
    utterThis.rate = 0.6;

    voz(utterThis);

    
    //utterThis.pitch = pitch.value;
    //utterThis.rate = rate.value;
    //utterThis.lang = utterThis.voice.lang
    utterThis.lang = "en-US";

    synth.speak(utterThis);
}

// funcion para listen and repead con retraso en las demas palabras
function listen(txt){
    event.preventDefault();
    const vozThis = new SpeechSynthesisUtterance(txt[0]);
    vozThis.onerror = function (event) {
      console.error("SpeechSynthesisUtterance.onerror");
    };
    vozThis.voice = voices[0];
    vozThis.pitch = 0.6;
    vozThis.rate = 0.6;
    voz(vozThis);
    vozThis.lang = "en-US";
    vozThis.onend = function (event) {
      time = 1000;
      //console.log("jejejeje");
      for (let x = 1; x < txt.length; x++) {
        setTimeout(speak, time, txt[x]);
        time += 4000;
        console.log("fijado: "+time);
      }
    };
    synth.speak(vozThis);
}

function myFunction(num,arr){
    event.preventDefault();
    speak(arr[num]);
}

function myFunction2(){
    event.preventDefault();
    speak(par);
}

function resp2(){
    event.preventDefault();
    let sel = document.getElementById("res2")[1].value;
    console.log(sel);
}


function populateVoiceList() {

  let langSubstr = "en-US";

  voices = synth.getVoices().filter(function (v) {
    return v.lang.replace('_', '-').substring(0, langSubstr.length) === langSubstr
  }).sort(function (a, b) {
    const aname = a.name.toUpperCase();
    const bname = b.name.toUpperCase();

    if (aname < bname) {
      return -1;
    } else if (aname == bname) {
      return 0;
    } else {
      return +1;
    }
  });

  /*const selectedIndex = voiceSelect.selectedIndex < 0 ? 0 : voiceSelect.selectedIndex;
  voiceSelect.innerHTML = "";

  for (let i = 0; i < voices.length; i++) {
    const option = document.createElement("option");
    option.textContent = `${voices[i].name} (${voices[i].lang})`;

    if (voices[i].default) {
      option.textContent += " -- DEFAULT";
    }

    option.setAttribute("data-lang", voices[i].lang);
    option.setAttribute("data-name", voices[i].name);
    voiceSelect.appendChild(option);
  }
  voiceSelect.selectedIndex = selectedIndex;*/
}

populateVoiceList();


if (speechSynthesis.onvoiceschanged !== undefined) {
  speechSynthesis.onvoiceschanged = populateVoiceList;
}

/*
pitch.onchange = function () {
  pitchValue.textContent = pitch.value;
};

rate.onchange = function () {
  rateValue.textContent = rate.value;
};*/

// funcion para elegir la voz deseada con sus parametros
function voz(vozThis){
  for (let i = 0; i < voices.length; i++) {
      if (voices[i].name == "Microsoft Guy Online (Natural) - English (United States)") {
        console.log(voices[i].name);
        vozThis.voice = voices[i];
        vozThis.pitch = 0.9;
        vozThis.rate = 0.9;
        break;
      }
      if (voices[i].name == "Microsoft Zira - English (United States)") {
        console.log(voices[i].name);
        vozThis.voice = voices[i];
        vozThis.pitch = 0.6;
        vozThis.rate = 0.6;
        break;
      }
      if (voices[i].name == "Microsoft Zira Desktop - English (United States)") {
        console.log(voices[i].name);
        vozThis.voice = voices[i];
        vozThis.pitch = 0.8;
        vozThis.rate = 0.8;
        break;
      }
    }
}


////////////////////////////////////////////////////////////////////////

let recognition;

function runSpeechRecognition() {
  event.preventDefault();
  var output = document.getElementById("output");

  // new speech recognition object
  var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;
  recognition = new SpeechRecognition();

  // Recogniser doesn't stop listening even if the user pauses
  recognition.continuous = false;
	recognition.lang = 'en-US';
	recognition.interimResults = true;

  // This runs when the speech recognition service returns result
  recognition.onresult = function(event) {
                    /*
					let transcript = event.results[0][0].transcript;
          let confidence = event.results[0][0].confidence;
          output.innerHTML = "<b>Text:</b> " + transcript + "<br/> <b>Confidence:</b> " + confidence*100+"%";
          output.classList.remove("hide");*/

					output.innerHTML ="";
					let len = event.results.length;
					for (let i = event.resultIndex; i < len; i++) {
						/*if (event.results[i].isFinal) {
							output.innerHTML = event.results[i][0].transcript + ' (Confidence: ' + event.results[i][0].confidence + ')';
						} else {
							output.innerHTML+= event.results[i][0].transcript;
						}*/
						output.innerHTML+= event.results[i][0].transcript;
					}
					/**/
  };

  recognition.addEventListener('error', function(event) {
		console.log('Speech recognition error detected: ' + event.error);
		runSpeechRecognition();
	});

  recognition.addEventListener('error', runSpeechRecognition);

  // This runs when the speech recognition service starts
  recognition.onstart = function() {
    output.innerHTML = "<small>listening, please speak...</small>";
  };

  recognition.onspeechend = function() {
    recognition.stop();
  }

  recognition.start();
}

function stopSpeechRecognition() {
	console.log("stoped");
	recognition.stop();
}

/////////////////////////////////////////////////////////////////////

// devuelve un array de 5 posiciones sacados de otro array
// se usa para seleccionar 5 frases random
function random(arr){
  let res =[];
  let limit = 5;
  if(arr.length < limit) limit = arr.length;
  let i = 0;
  while (i < limit) {
    num = Math.floor(Math.random() * arr.length);
    a = buscaArr(num,res);
    if(a==true){
      res.push(num);
      i++;
    }
  }
  return res;
}

//console.log(random(greetings));

// busca un elemento dentro de array
// devuelve true si NO lo encuentra 
// devuelve false si lo encuentra
function buscaArr(n,arr){
  let a = true;
  for (let x = 0; x < arr.length; x++) {
      if (n == arr[x]) {
        a = false;
        break;
      }
  }
  return a;
}

///////////////////////////////// Grammar Exercises

$('#dataForm_grammar_Button').on('click', function(e) {
  e.preventDefault();
  let dataString = $('#dataForm_grammar').serialize();
  //console.log('Datos serializados: '+dataString);
  let res = ["good", "are", "everything", "what", "family", "Iam"];
  let total = 0;
  for (let i = 0; i < res.length; i++) {
    let position = dataString.search(res[i]);
    if (position != -1) {
      total++;
    }
  }
  document.getElementById("graanswer").innerHTML = "Respuestas correctas "+total+" de 6";
}); 

///////////////////////////////// Reaing Exercises

$('#dataForm_Reading_Button').on('click', function(e) {
  e.preventDefault();
  let dataString = $('#dataForm_Reading').serialize();
  //console.log('Datos serializados: '+dataString);
  let res = ["r1=0","r2=1","r3=3","r4=1"];
  let total = 0;
  for (let i = 0; i < 4; i++) {
    let position = dataString.search(res[i]);
    if (position != -1) {
      total++;
    }
  }
  document.getElementById("redanswer").innerHTML = "Respuestas correctas "+total+" de 4";
});

///////////////////////////////// Writing Exercises

function writting_exercise() {
  let res = ["how are you","good and you","I am fine thanks","How is everything", "my family is good"];
  let total = 0;
  for (let i = 0; i < res.length; i++) {
    num = i+1;
    let texto = document.getElementById("wri"+num);
    let respuesta = limpia_texto(texto.value);
    let word = limpia_texto(res[i]);
    let position = respuesta.search(word);
    if (position != -1) {
      total++;
    }else{
      if(respuesta != ""){
        document.getElementById("errwri"+num).innerHTML = res[i];
      }
    }
    document.getElementById("wrianswer").innerHTML = "Respuestas correctas "+total+" de 5";
  }
}

///////////////////////////////// Translate Exercises

function translate_exercise() {
  let res = ["my family is good","I'm well and you","I'm thirsty","I'm sad", "how is everything"];
  let total = 0;
  for (let i = 0; i < res.length; i++) {
    num = i+1;
    let texto = document.getElementById("trans"+num);
    let respuesta = limpia_texto(texto.value);
    let word = limpia_texto(res[i]);
    let position = respuesta.search(word);
    if (position != -1) {
      total++;
    }else{
      if(respuesta != ""){
        document.getElementById("errtrans"+num).innerHTML = res[i];
      }
    }
    document.getElementById("transanswer").innerHTML = "Respuestas correctas "+total+" de 5";
  }
}

///////////////////////////////// Listen Exercises

function listen_exercise(res) {
  let total = 0;
  for (let i = 0; i < res.length; i++) {
    num = i+1;
    let texto = document.getElementById("lis"+num);
    let respuesta = limpia_texto(texto.value);
    let word = limpia_texto(res[i]);
    let position = respuesta.search(word);
    if (position != -1) {
      total++;
    }else{
      if(respuesta != ""){
        document.getElementById("errlis"+num).innerHTML = res[i];
      }
    }
    document.getElementById("lisanswer").innerHTML = "Respuestas correctas "+total+" de 5";
  }
}

function limpia_texto(res){
  res = res.replace(/,/g, "");
  res = res.replace(/\./g, "");
  res = res.replace(/\(/g, "");
  res = res.replace(/\)/g, "");
  res = res.replace(/\-/g, " ");
  res = res.replace(/\:/g, "");
  res = res.replace(/\“/g, "");
  res = res.replace(/\”/g, "");
  res = res.replace(/\"/g, "");
  res = res.replace(/\;/g, "");
  res = res.replace(/\!/g, "");
  res = res.replace(/\?/g, "");
  res = res.replace(/\//g, "");
  res = res.replace(/\'/g, "");
  res = res.replace(/\’/g, "");
  return res.toLocaleLowerCase();
}

</script>
    
</body>
</html>